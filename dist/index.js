/*! For license information please see index.js.LICENSE.txt */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(global,(()=>(()=>{"use strict";var t={287:(t,e,n)=>{const r=n(661),o=n(876),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.hp=c,e.IS=50;const a=2147483647;function s(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e}function c(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return f(t)}return l(t,e,n)}function l(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|g(t,e);let r=s(n);const o=r.write(t,e);return o!==n&&(r=r.slice(0,o)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(V(t,Uint8Array)){const e=new Uint8Array(t);return h(e.buffer,e.byteOffset,e.byteLength)}return d(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(V(t,ArrayBuffer)||t&&V(t.buffer,ArrayBuffer))return h(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(V(t,SharedArrayBuffer)||t&&V(t.buffer,SharedArrayBuffer)))return h(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return c.from(r,e,n);const o=function(t){if(c.isBuffer(t)){const e=0|p(t.length),n=s(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||Y(t.length)?s(0):d(t):"Buffer"===t.type&&Array.isArray(t.data)?d(t.data):void 0}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function f(t){return u(t),s(t<0?0:0|p(t))}function d(t){const e=t.length<0?0:0|p(t.length),n=s(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function h(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,c.prototype),r}function p(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function g(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||V(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return K(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(t).length;default:if(o)return r?-1:K(t).length;e=(""+e).toLowerCase(),o=!0}}function y(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,e,n);case"utf8":case"utf-8":return O(this,e,n);case"ascii":return N(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return B(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function w(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Y(n=+n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,o){let i,a=1,s=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,n/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){let r=-1;for(i=n;i<s;i++)if(l(t,i)===l(e,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===c)return r*a}else-1!==r&&(i-=i-r),r=-1}else for(n+c>s&&(n=s-c),i=n;i>=0;i--){let n=!0;for(let r=0;r<c;r++)if(l(t,i+r)!==l(e,r)){n=!1;break}if(n)return i}return-1}function v(t,e,n,r){n=Number(n)||0;const o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;const i=e.length;let a;for(r>i/2&&(r=i/2),a=0;a<r;++a){const r=parseInt(e.substr(2*a,2),16);if(Y(r))return a;t[n+a]=r}return a}function E(t,e,n,r){return W(K(e,t.length-n),t,n,r)}function I(t,e,n,r){return W(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function S(t,e,n,r){return W(H(e),t,n,r)}function k(t,e,n,r){return W(function(t,e){let n,r,o;const i=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function B(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function O(t,e,n){n=Math.min(t.length,n);const r=[];let o=e;for(;o<n;){const e=t[o];let i=null,a=e>239?4:e>223?3:e>191?2:1;if(o+a<=n){let n,r,s,c;switch(a){case 1:e<128&&(i=e);break;case 2:n=t[o+1],128==(192&n)&&(c=(31&e)<<6|63&n,c>127&&(i=c));break;case 3:n=t[o+1],r=t[o+2],128==(192&n)&&128==(192&r)&&(c=(15&e)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:n=t[o+1],r=t[o+2],s=t[o+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(c=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&s,c>65535&&c<1114112&&(i=c))}}null===i?(i=65533,a=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),o+=a}return function(t){const e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=C));return n}(r)}c.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(t,e,n){return l(t,e,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,n){return function(t,e,n){return u(t),t<=0?s(t):void 0!==e?"string"==typeof n?s(t).fill(e,n):s(t).fill(e):s(t)}(t,e,n)},c.allocUnsafe=function(t){return f(t)},c.allocUnsafeSlow=function(t){return f(t)},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(V(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),V(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=c.allocUnsafe(e);let o=0;for(n=0;n<t.length;++n){let e=t[n];if(V(e,Uint8Array))o+e.length>r.length?(c.isBuffer(e)||(e=c.from(e)),e.copy(r,o)):Uint8Array.prototype.set.call(r,e,o);else{if(!c.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,o)}o+=e.length}return r},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)m(this,e,e+1);return this},c.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},c.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},c.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?O(this,0,t):y.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){let t="";const n=e.IS;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},i&&(c.prototype[i]=c.prototype.inspect),c.prototype.compare=function(t,e,n,r,o){if(V(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;let i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0);const s=Math.min(i,a),l=this.slice(r,o),u=t.slice(e,n);for(let t=0;t<s;++t)if(l[t]!==u[t]){i=l[t],a=u[t];break}return i<a?-1:a<i?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return w(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return w(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return E(this,t,e,n);case"ascii":case"latin1":case"binary":return I(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const C=4096;function N(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function A(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function x(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let o="";for(let r=e;r<n;++r)o+=X[t[r]];return o}function U(t,e,n){const r=t.slice(e,n);let o="";for(let t=0;t<r.length-1;t+=2)o+=String.fromCharCode(r[t]+256*r[t+1]);return o}function T(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function _(t,e,n,r,o,i){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function R(t,e,n,r,o){q(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,n}function P(t,e,n,r,o){q(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n+7]=i,i>>=8,t[n+6]=i,i>>=8,t[n+5]=i,i>>=8,t[n+4]=i;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=a,a>>=8,t[n+2]=a,a>>=8,t[n+1]=a,a>>=8,t[n]=a,n+8}function j(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,i){return e=+e,n>>>=0,i||j(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,i){return e=+e,n>>>=0,i||j(t,0,n,8),o.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||T(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||T(t,e,this.length);let r=this[t+--e],o=1;for(;e>0&&(o*=256);)r+=this[t+--e]*o;return r},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t>>>=0,e||T(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||T(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||T(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||T(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||T(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readBigUInt64LE=Z((function(t){J(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||z(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,o=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),c.prototype.readBigUInt64BE=Z((function(t){J(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||z(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],o=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),c.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||T(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||T(t,e,this.length);let r=e,o=1,i=this[t+--r];for(;r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},c.prototype.readInt8=function(t,e){return t>>>=0,e||T(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||T(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){t>>>=0,e||T(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||T(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||T(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readBigInt64LE=Z((function(t){J(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||z(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),c.prototype.readBigInt64BE=Z((function(t){J(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||z(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),c.prototype.readFloatLE=function(t,e){return t>>>=0,e||T(t,4,this.length),o.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||T(t,4,this.length),o.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||T(t,8,this.length),o.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||T(t,8,this.length),o.read(this,t,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||_(this,t,e,n,Math.pow(2,8*n)-1,0);let o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||_(this,t,e,n,Math.pow(2,8*n)-1,0);let o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigUInt64LE=Z((function(t,e=0){return R(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=Z((function(t,e=0){return P(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);_(this,t,e,n,r-1,-r)}let o=0,i=1,a=0;for(this[e]=255&t;++o<n&&(i*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/i|0)-a&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);_(this,t,e,n,r-1,-r)}let o=n-1,i=1,a=0;for(this[e+o]=255&t;--o>=0&&(i*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/i|0)-a&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||_(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigInt64LE=Z((function(t,e=0){return R(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=Z((function(t,e=0){return P(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const o=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),o},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{const i=c.isBuffer(t)?t:c.from(t,r),a=i.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=i[o%a]}return this};const D={};function M(t,e,n){D[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function $(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function q(t,e,n,r,o,i){if(t>n||t<e){const r="bigint"==typeof e?"n":"";let o;throw o=i>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(i+1)}${r}`:`>= -(2${r} ** ${8*(i+1)-1}${r}) and < 2 ** ${8*(i+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new D.ERR_OUT_OF_RANGE("value",o,t)}!function(t,e,n){J(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||z(e,t.length-(n+1))}(r,o,i)}function J(t,e){if("number"!=typeof t)throw new D.ERR_INVALID_ARG_TYPE(e,"number",t)}function z(t,e,n){if(Math.floor(t)!==t)throw J(t,n),new D.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new D.ERR_BUFFER_OUT_OF_BOUNDS;throw new D.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}M("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),M("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),M("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=$(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=$(o)),o+="n"),r+=` It must be ${e}. Received ${o}`,r}),RangeError);const G=/[^+/0-9A-Za-z-_]/g;function K(t,e){let n;e=e||1/0;const r=t.length;let o=null;const i=[];for(let a=0;a<r;++a){if(n=t.charCodeAt(a),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function H(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function W(t,e,n,r){let o;for(o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function V(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Y(t){return t!=t}const X=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let o=0;o<16;++o)e[r+o]=t[n]+t[o]}return e}();function Z(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},661:t=>{t.exports=require("base64-js")},876:t=>{t.exports=require("ieee754")}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{n.r(r),n.d(r,{CommitButton:()=>be,EthersProviderContext:()=>ve,Widget:()=>Ee,useAccount:()=>Ot,useAccountId:()=>Ct,useCache:()=>ce,useInitNear:()=>ft,useNear:()=>pt,utils:()=>t});var t={};n.r(t),n.d(t,{ErrorFallback:()=>S,Loading:()=>I,MaxGasPerTransaction:()=>g,OneNear:()=>v,ReactKey:()=>Q,StorageCostPerByte:()=>y,TGas:()=>p,availableNearBalance:()=>L,bigMax:()=>U,bigMin:()=>x,bigToString:()=>T,computeSrcOrCode:()=>ot,computeWritePermission:()=>X,convertToStringLeaves:()=>G,dateToString:()=>P,deepCopy:()=>et,deepEqual:()=>rt,deepFreeze:()=>Z,displayGas:()=>R,displayNear:()=>_,displayTime:()=>j,estimateDataSize:()=>$,extractKeys:()=>q,filterValues:()=>nt,indexMatch:()=>V,ipfsUpload:()=>D,ipfsUrl:()=>M,isArray:()=>B,isFunction:()=>N,isObject:()=>O,isReactObject:()=>tt,isString:()=>C,isValidAccountId:()=>k,isoDate:()=>F,keysToCamel:()=>A,patternMatch:()=>W,removeDuplicates:()=>J});var e={};n.r(e),n.d(e,{CommitButton:()=>be,EthersProviderContext:()=>ve,Widget:()=>Ee,useAccount:()=>Ot,useAccountId:()=>Ct,useCache:()=>ce,useInitNear:()=>ft,useNear:()=>pt,utils:()=>t});const o=require("react");var i=n.n(o);const a=require("react-singleton-hook"),s=require("near-api-js"),c=require("big.js");var l=n.n(c);const u=require("deep-equal");var f=n.n(u);const d=require("ethers");var h=n(287).hp;const p=l()(10).pow(12),g=p.mul(250),y=l()(10).pow(19),m=2,w=64,b=/^(([a-z\d]+[-_])*[a-z\d]+\.)*([a-z\d]+[-_])*[a-z\d]+$/,v=l()(10).pow(24),E=v.div(2),I=i().createElement("span",{className:"spinner-grow spinner-grow-sm me-1",role:"status","aria-hidden":"true"}),S=t=>{let{error:e}=t;return i().createElement("div",{role:"alert"},i().createElement("p",null,"Something went wrong:"),i().createElement("pre",null,e.message))};function k(t){return t&&t.length>=m&&t.length<=w&&t.match(b)}const B=t=>Array.isArray(t),O=t=>t===Object(t)&&!B(t)&&"function"!=typeof t,C=t=>"string"==typeof t,N=t=>"function"==typeof t,A=function(t){if(O(t)){const e={};return Object.keys(t).forEach((n=>{var r;e[(r=n,r.replace(/([-_][a-z])/gi,(t=>t.toUpperCase().replace("-","").replace("_",""))))]=A(t[n])})),e}return B(t)?t.map((t=>A(t))):t},x=(t,e)=>t&&e?t.lt(e)?t:e:t||e,U=(t,e)=>t&&e?t.gt(e)?t:e:t||e,T=(t,e,n)=>{if(null===t)return"???";let r=t.toFixed(),o=r.indexOf(".");if(e=e||6,n=n||7,o>0){let t=Math.min(e,Math.max(n-o,0));t>0&&(t+=1),o+t<r.length&&(r=r.substring(0,o+t))}else o=r.length;for(let t=o-4;t>=0;t-=3)r=r.slice(0,t+1)+","+r.slice(t+1);return"0.000000"===r&&6===e&&7===n?"<0.000001":r},_=t=>t?t.eq(1)?i().createElement(i().Fragment,null,"1 ",i().createElement("span",{className:"text-secondary"},"yoctoNEAR")):i().createElement(i().Fragment,null,T(t.div(v))," ",i().createElement("span",{className:"text-secondary"},"NEAR")):"???",R=t=>t?i().createElement(i().Fragment,null,T(t.div(p))," ",i().createElement("span",{className:"text-secondary"},"TGas")):"???",P=t=>t.toLocaleString("en-us",{day:"numeric",month:"short",year:"numeric"}),j=t=>t.toLocaleString(),L=t=>{if(t&&!t.loading&&t.state){let e=l()(t.state.amount).sub(l()(t.state.storage_usage).mul(l()(y)));if(e.gt(E))return e.sub(E)}return l()(0)},F=t=>t?new Date(t).toISOString().substring(0,10):"",D=async t=>{const e=await fetch("https://ipfs.near.social/add",{method:"POST",headers:{Accept:"application/json"},body:t});return(await e.json()).cid},M=t=>"https://ipfs.near.social/ipfs/".concat(t),$=(t,e)=>O(t)?Object.entries(t).reduce(((t,n)=>{let[r,o]=n;const i=O(e)?e[r]:void 0;return t+(void 0!==i?$(o,i):2*r.length+$(o,void 0)+140)}),O(e)?0:98):((null==t?void 0:t.length)||8)-(C(e)?e.length:0),q=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.entries(t).map((t=>{let[n,r]=t;return O(r)?q(r,"".concat(e).concat(n,"/")):"".concat(e).concat(n)})).flat()},J=(t,e)=>{const n=Object.entries(t).reduce(((t,n)=>{let[r,o]=n;const i=O(e)?e[r]:void 0;if(O(o)){const e=O(i)?J(o,i):o;void 0!==e&&(t[r]=e)}else o!==i&&(t[r]=o);return t}),{});return Object.keys(n).length?n:void 0},z=t=>C(t)||null===t?t:JSON.stringify(t),G=t=>O(t)?Object.entries(t).reduce(((t,e)=>{let[n,r]=e;return t[z(n)]=G(r),t}),{}):z(t),K=(t,e)=>{const n=e[0];let r="**"===n;return r?1===e.length:("*"===n||r?Object.values(t):t.hasOwnProperty(n)?[t[n]]:[]).some((t=>O(t)?e.length>1?K(t,e.slice(1)):void 0!==t[""]:1===e.length))},H=(t,e)=>{const n=e[0];return("*"===n?Object.values(t):t.hasOwnProperty(n)?[t[n]]:[]).some((t=>1===e.length||O(t)&&H(t,e.slice(1))))},W=(t,e,n)=>{const r=e.split("/");return"get"===t?K(n,r):"keys"===t&&H(n,r)},V=(t,e,n)=>Object.values(n).some((n=>{var r;const o=null==n||null===(r=n.index)||void 0===r?void 0:r[t];try{return o&&JSON.stringify(JSON.parse(o).key)===JSON.stringify(e)}catch{return!1}})),Y={graph:!0,post:!0,index:!0,settings:!0},X=(t,e)=>{const n=O(t)?JSON.parse(JSON.stringify(t)):{};return O(e)&&Object.entries(e).forEach((t=>{let[e,r]=t;if(Y.hasOwnProperty(e))if(O(r)){const t=n[e]=n[e]||{};Object.keys(r).forEach((e=>{t[e]=!0}))}else n[e]=!0;else n[e]=!0})),n},Z=t=>(Object.freeze(t),Object.keys(t).forEach((e=>{(function(t,e){return!!Object.getOwnPropertyDescriptor(t,e).get})(t,e)||"object"!=typeof t[e]||Object.isFrozen(t[e])||Z(t[e])})),t),Q="$$typeof",tt=t=>null!==t&&"object"==typeof t&&!!t[Q],et=t=>Array.isArray(t)?t.map((t=>et(t))):t instanceof Map?new Map([...t.entries()].map((t=>{let[e,n]=t;return[et(e),et(n)]}))):t instanceof Set?new Set([...t].map((t=>et(t)))):h.isBuffer(t)?h.from(t):t instanceof URL?new URL(t):t instanceof File?new File([t],t.name,{type:t.type}):t instanceof Blob?new Blob([t],{type:t.type}):t instanceof Uint8Array||t instanceof ArrayBuffer?t.slice(0):t instanceof d.ethers.BigNumber?t:t instanceof Date?new Date(t):t instanceof WebSocket?t:O(t)?tt(t)?t:Object.fromEntries(Object.entries(t).map((t=>{let[e,n]=t;return[e,et(n)]}))):void 0===t||"function"==typeof t?t:JSON.parse(JSON.stringify(t)),nt=t=>O(t)?Object.fromEntries(Object.entries(t).filter((t=>{let[e,n]=t;return void 0!==n}))):t,rt=f(),ot=(t,e,n)=>{let r=t?{src:t}:e?{code:e}:null;for(const t of n||[]){var o;if(null!==(o=r)&&void 0!==o&&o.src){var i;const e=r.src;let n=O(null==t?void 0:t.redirectMap)&&t.redirectMap[e];if(!n)try{n=N(null==t?void 0:t.redirect)&&t.redirect(e)}catch{}if(C(n))r={src:n};else if(C(null===(i=n)||void 0===i?void 0:i.code))return{code:n.code}}}return r};var it=n(287).hp;const at=(t,e,n,r)=>({type:"FunctionCall",params:{methodName:t,args:e,gas:n,deposit:r}}),st={networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",archivalNodeUrl:"https://rpc.testnet.internal.near.org",contractName:"v1.social08.testnet",walletUrl:"https://wallet.testnet.near.org",wrapNearAccountId:"wrap.testnet",apiUrl:"https://discovery-api.stage.testnet.near.org",enableWeb4FastRpc:!1},ct={networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",archivalNodeUrl:"https://rpc.mainnet.internal.near.org",contractName:"social.near",walletUrl:"https://wallet.near.org",wrapNearAccountId:"wrap.near",apiUrl:"https://api.near.social",enableWeb4FastRpc:!1},lt={get:!0,keys:!0};async function ut(t){var e;let{networkId:n,config:r,keyStore:o,selector:i,walletConnectCallback:a=(()=>{}),customElements:c={},features:u={}}=t;r||(r={},n||(r.networkId="mainnet")),n&&!r.networkId&&(r.networkId=n),"mainnet"===r.networkId?r=Object.assign({},ct,r):"testnet"===r.networkId&&(r=Object.assign({},st,r)),r.walletConnectCallback=a,r.customElements=Object.assign({},r.customElements,c),o=null!==(e=o)&&void 0!==e?e:new s.keyStores.BrowserLocalStorageKeyStore;const f=await s.connect(Object.assign({deps:{keyStore:o}},r)),d={config:r,selector:i,keyStore:o,nearConnection:f,features:u};d.nearArchivalConnection=s.Connection.fromConfig({networkId:r.networkId,provider:{type:"JsonRpcProvider",args:{url:r.archivalNodeUrl}},signer:{type:"InMemorySigner",keyStore:o}});const h=t=>{var e;return"optimistic"===t||"final"===t?{finality:t,blockId:void 0}:null!=t?{finality:void 0,blockId:parseInt(t)}:{finality:null!==(e=r.defaultFinality)&&void 0!==e?e:"optimistic",blockId:void 0}};return d.viewCall=(t,e,n,o)=>{const{blockId:i,finality:a}=h(o),s=()=>async function(t,e,n,r,o,i){o=o||{};const a=await t.query({request_type:"call_function",account_id:n,method_name:r,args_base64:it.from(JSON.stringify(o)).toString("base64"),block_id:e,finality:i});return a.result&&a.result.length>0&&JSON.parse(it.from(a.result).toString())}(i?d.nearArchivalConnection.provider:d.nearConnection.connection.provider,null!=i?i:void 0,t,e,n,a),c=()=>"optimistic"===a&&r.enableWeb4FastRpc?async function(t,e,n,r){n=n||{};const o=new URL("https://rpc.web4.near.page/account/".concat(t,"/view/").concat(e));Object.entries(n).forEach((t=>{let[e,n]=t;void 0!==n&&o.searchParams.append("".concat(e,".json"),JSON.stringify(n))}));try{return await(await fetch(o.toString())).json()}catch(t){return console.log("Web4 view call failed",o.toString()),console.error(t),r()}}(t,e,n,s):s();return t!==r.contractName||!i&&"final"!==a?c():(async(t,e,n,r,o)=>{if(!t.apiUrl||!lt.hasOwnProperty(e))return o();n=n||{},r&&(n.blockHeight=r);try{return await(await fetch("".concat(t.apiUrl,"/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json()}catch(t){return console.log("API call failed",e,n),console.error(t),o()}})(r,e,n,i,c)},d.block=t=>{const e=h(t);return(e.blockId?d.nearArchivalConnection.provider:d.nearConnection.connection.provider).block(e)},d.functionCall=(t,e,n,r,o)=>async function(t,e,n,r,o,i){try{const a=await(await t.selector).wallet();return await a.signAndSendTransaction({receiverId:e,actions:[at(n,r,null!=o?o:p.mul(30).toFixed(0),null!=i?i:"0")]})}catch(t){throw t}}(d,t,e,n,r,o),d.sendTransactions=t=>async function(t,e){try{const n=await(await t.selector).wallet(),r=[];let o=l()(0);return e.forEach((t=>{var e;let{contractName:n,methodName:i,args:a,gas:s,deposit:c}=t;const l=o.add(s),u=at(i,a,s.toFixed(0),c.toFixed(0));(null===(e=r[r.length-1])||void 0===e?void 0:e.receiverId)!==n||l.gt(g)?(r.push({receiverId:n,actions:[]}),o=s):o=l,r[r.length-1].actions.push(u)})),await n.signAndSendTransactions({transactions:r})}catch(t){throw t}}(d,t),d.contract=function(t,e,n){const{viewMethods:r=[],changeMethods:o=[]}={viewMethods:["storage_balance_of","get","get_num_accounts","get_accounts_paged","is_write_permission_granted","keys"],changeMethods:["set","grant_write_permission","storage_deposit","storage_withdraw"]},i={near:t,contractId:e};return r.forEach((n=>{i[n]=r=>t.viewCall(e,n,r)})),o.forEach((n=>{i[n]=(r,o,i)=>t.functionCall(e,n,r,o,i)})),i}(d,r.contractName),d.accountState=t=>async function(t,e){const n=new s.Account(t.nearConnection.connection,e);return await n.state()}(d,t),d}const ft=(0,a.singletonHook)({},(()=>{const[t,e]=(0,o.useState)(null);return{nearPromise:t,initNear:(0,o.useMemo)((()=>t=>{var n;const r=(null===(n=t.config)||void 0===n?void 0:n.networkId)||t.networkId,o="mainnet"!==r&&"testnet"!==r,i="testnet"===r?t:{...t,networkId:"testnet",config:void 0,keyStore:void 0,selector:void 0},a="mainnet"===r?t:{...t,networkId:"mainnet",config:void 0,keyStore:void 0,selector:void 0};return e(Promise.all([i,a].concat(o?t:[]).map(ut)).then((t=>t.map((t=>({...t,default:t.config.networkId===r}))))))}),[])}})),dt=[],ht=(0,a.singletonHook)(dt,(()=>{const[t,e]=(0,o.useState)(dt),{nearPromise:n}=ft();return(0,o.useEffect)((()=>{n&&n.then(e)}),[n]),t?{default:t.find((t=>t.default)),testnet:t.find((t=>"testnet"===t.config.networkId)),mainnet:t.find((t=>"mainnet"===t.config.networkId))}:t})),pt=t=>ht()[t||"default"]||null,gt=require("local-storage");var yt,mt,wt,bt,vt=n.n(gt);const Et="near-social-vm:v01:",It=Et+":accountId:",St=Et+":pretendAccountId:",kt={loading:!0,signedAccountId:null!==(yt=vt().get(It))&&void 0!==yt?yt:void 0,pretendAccountId:null!==(mt=vt().get(St))&&void 0!==mt?mt:void 0,accountId:null!==(wt=null!==(bt=vt().get(St))&&void 0!==bt?bt:vt().get(It))&&void 0!==wt?wt:void 0,state:null,near:null},Bt=async(t,e)=>{var n;const r=t.accountId;r?(vt().set(It,r),t.config.walletConnectCallback(r)):vt().remove(It);const o=null!==(n=vt().get(St))&&void 0!==n?n:void 0,i={loading:!1,signedAccountId:r,pretendAccountId:o,accountId:null!=o?o:r,state:null,near:t,refresh:async()=>await Bt(t,e),startPretending:async n=>{n?vt().set(St,n):vt().remove(St),await Bt(t,e)}};if(r){const[e,n]=await Promise.all([t.contract.storage_balance_of({account_id:r}),t.accountState(r)]);i.storageBalance=e,i.state=n}e(i)},Ot=(0,a.singletonHook)(kt,(()=>{const[t,e]=(0,o.useState)(kt),n=pt();return(0,o.useEffect)((()=>{n&&n.selector&&n.selector.then((t=>{t&&t.store&&t.store.observable&&t.store.observable.subscribe((async t=>{await async function(t,e){var n,r,o;if(t.connectedContractId=null===(n=e)||void 0===n||null===(n=n.contract)||void 0===n?void 0:n.contractId,t.connectedContractId&&t.connectedContractId!==t.config.contractName){const n=await t.selector,r=await n.wallet();await r.signOut(),t.connectedContractId=null,e=n.store.getState()}if(t.accountId=null!==(r=null===(o=e)||void 0===o||null===(o=o.accounts)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.accountId)&&void 0!==r?r:null,t.accountId){t.publicKey=null;try{var i;if("here-wallet"===(null===(i=e)||void 0===i?void 0:i.selectedWalletId)){const e=vt().get("herewallet:keystore");t.publicKey=s.KeyPair.fromString(e[t.config.networkId].accounts[t.accountId]).getPublicKey()}}catch(t){console.error(t)}if(!t.publicKey)try{var a;t.publicKey=s.KeyPair.fromString(vt().get("meteor-wallet"===(null===(a=e)||void 0===a?void 0:a.selectedWalletId)?"_meteor_wallet".concat(t.accountId,":").concat(t.config.networkId):"near-api-js:keystore:".concat(t.accountId,":").concat(t.config.networkId))).getPublicKey()}catch(t){console.error(t)}}}(n,t);try{await Bt(n,e)}catch(t){console.error(t)}}))}))}),[n]),t})),Ct=t=>{const e=pt(),n=Ot();if(e&&(!t||e.config.networkId===t))return n.accountId},Nt=require("react-bootstrap/Modal");var At=n.n(Nt);const xt=require("remark-gfm");var Ut=n.n(xt);const Tt=require("react-markdown");var _t=n.n(Tt);const Rt=require("react-syntax-highlighter"),Pt=require("react-syntax-highlighter/dist/esm/styles/prism"),jt=require("mdast-util-find-and-replace"),Lt=/@((?:(?:[a-z\d]+[-_])*[a-z\d]+\.)*(?:[a-z\d]+[-_])*[a-z\d]+)/gi;function Ft(){function t(t,e,n){if(/[\w`]/.test(n.input.charAt(n.index-1))||/[/\w`]/.test(n.input.charAt(n.index+t.length))||e.length<2||e.length>64)return!1;let r={type:"text",value:t};return r={type:"strong",children:[r],data:{hProperties:{accountId:e}}},r}return function(e){return(0,jt.findAndReplace)(e,Lt,t),e}}const Dt=/#(\w+)/gi;function Mt(){function t(t,e,n){if(/[\w`]/.test(n.input.charAt(n.index-1))||/[/\w`]/.test(n.input.charAt(n.index+t.length)))return!1;let r={type:"text",value:t};return r={type:"strong",children:[r],data:{hProperties:{hashtag:e}}},r}return function(e){return(0,jt.findAndReplace)(e,Dt,t),e}}function $t(){return $t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$t.apply(this,arguments)}const qt=t=>{const{onLink:e,onLinkClick:n,text:r,onMention:o,onHashtag:a,onImage:s,syntaxHighlighterProps:c}=t;return i().createElement(_t(),{plugins:[],rehypePlugins:[],remarkPlugins:[Ut(),Ft,Mt],children:r,components:{strong(t){var e,n;let{node:r,children:s,...c}=t;var l,u;return o&&null!==(e=r.properties)&&void 0!==e&&e.accountId?o(null===(l=r.properties)||void 0===l?void 0:l.accountId):a&&null!==(n=r.properties)&&void 0!==n&&n.hashtag?a(null===(u=r.properties)||void 0===u?void 0:u.hashtag):i().createElement("strong",c,s)},a:t=>{var r;let{node:o,...a}=t;return e?e({...a,href:null===(r=o.properties)||void 0===r?void 0:r.href}):n?i().createElement("a",$t({onClick:n},a)):i().createElement("a",$t({target:"_blank"},a))},img:t=>{let{node:e,...n}=t;return s?s({...n}):i().createElement("img",$t({className:"img-fluid"},n))},blockquote:t=>{let{node:e,...n}=t;return i().createElement("blockquote",$t({className:"blockquote"},n))},table:t=>{let{node:e,...n}=t;return i().createElement("table",$t({className:"table table-striped"},n))},code(t){let{node:e,inline:n,className:r,children:o,...a}=t;const s=/language-(\w+)/.exec(r||""),{wrapLines:l,lineProps:u,showLineNumbers:f,lineNumberStyle:d}=null!=c?c:{};return!n&&s?i().createElement(Rt.Prism,$t({children:String(o).replace(/\n$/,""),style:Pt.tomorrow,language:s[1],PreTag:"div",wrapLines:l,lineProps:u,showLineNumbers:f,lineNumberStyle:d},a)):i().createElement("code",$t({className:r},a),o)}}})},Jt=require("react-uuid");var zt=n.n(Jt);const Gt=t=>{const e=JSON.stringify(t,null,2);return"```json\n".concat(e,"\n```")};function Kt(t){const e=(0,o.useState)(zt()()),n=pt(t.networkId),[r,a]=(0,o.useState)(!1),s=t.onHide,c=t.transactions,l=!!c;return i().createElement(At(),{size:"xl",centered:!0,scrollable:!0,show:l,onHide:s},i().createElement(At().Header,{closeButton:!0},i().createElement(At().Title,null,"Confirm Transaction")),i().createElement(At().Body,null,c&&c.map(((t,n)=>i().createElement("div",{key:"".concat(e,"-").concat(n)},i().createElement("div",null,i().createElement("h4",null,"Transaction #",n+1)),i().createElement("div",null,i().createElement("span",{className:"text-secondary"},"Contract ID: "),i().createElement("span",{className:"font-monospace"},t.contractName)),i().createElement("div",null,i().createElement("span",{className:"text-secondary"},"Method name: "),i().createElement("span",{className:"font-monospace"},t.methodName)),t.deposit&&t.deposit.gt(0)&&i().createElement("div",null,i().createElement("span",{className:"text-secondary"},"Deposit: "),i().createElement("span",{className:"font-monospace"},_(t.deposit))),i().createElement("div",null,i().createElement("span",{className:"text-secondary"},"Gas: "),i().createElement("span",{className:"font-monospace"},R(t.gas))),i().createElement(qt,{text:Gt(t.args)}))))),i().createElement(At().Footer,null,i().createElement("button",{className:"btn btn-success",disabled:r,onClick:t=>{t.preventDefault(),a(!0),n.sendTransactions(c).then((()=>{a(!1),s()}))}},r&&I," Confirm"),i().createElement("button",{className:"btn btn-secondary",onClick:s,disabled:r},"Close")))}const Ht=require("react-error-boundary"),Wt=require("idb"),Vt="ViewCall",Yt="Fetch",Xt="LocalStorage",Zt="NotStarted",Qt="InProgress",te="Done",ee="Invalidated",ne="cache-v1";class re{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cacheDb",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;this.dbPromise=(0,Wt.openDB)(t,1,{upgrade(t){t.createObjectStore(ne)}}),this.cache={},this.finalSynchronizationDelayMs=e}invalidateCallbacks(t,e){var n;if(null!==(n=t.invalidationCallbacks)&&void 0!==n&&n.length){const n=t.invalidationCallbacks;t.invalidationCallbacks=[],setTimeout((()=>{n.forEach((t=>{try{t()}catch{}}))}),e?this.finalSynchronizationDelayMs+50:50)}}async innerGet(t){return(await this.dbPromise).get(ne,t)}async innerSet(t,e){return(await this.dbPromise).put(ne,e,t)}cachedPromise(t,e,n,r){t=JSON.stringify(t);const o=this.cache[t]||{status:Zt,invalidationCallbacks:[],result:null,time:(new Date).getTime()};if(this.cache[t]=o,O(n)||(n={onInvalidate:n}),n.onInvalidate&&o.invalidationCallbacks.push(n.onInvalidate),!o.subscription&&n.subscribe){const t=()=>{o.subscription=setTimeout((()=>{document.hidden?t():(o.subscription=null,o.status=ee,this.invalidateCallbacks(o,!1))}),5e3)};t()}return o.status===Qt||o.status===te&&o.time+3e5>(new Date).getTime()||(o.status!==Zt||null!=r&&r.ignoreCache||this.innerGet(t).then((t=>{(t||null!=r&&r.forceCachedValue)&&o.status===Qt&&(o.result=t,o.time=(new Date).getTime(),this.invalidateCallbacks(o,!1))})),o.status=Qt,e&&e().then((e=>{o.status=te,o.time=(new Date).getTime(),JSON.stringify(e)!==JSON.stringify(o.result)&&(o.result=e,this.innerSet(t,e),this.invalidateCallbacks(o,!1))})).catch((e=>{console.error(e),o.status=te;const n=void 0;o.time=(new Date).getTime(),JSON.stringify(n)!==JSON.stringify(o.result)&&(o.result=n,this.innerSet(t,n),this.invalidateCallbacks(o,!1))}))),o.result}invalidateCache(t,e){const n=[],r="".concat(t.config.apiUrl,"/index");Object.keys(this.cache).forEach((o=>{let i;try{i=JSON.parse(o)}catch(t){return void console.error("Key deserialization failed",o)}if(i.action===Vt&&i.contractId===t.config.contractName&&(!i.blockId||"optimistic"===i.blockId||"final"===i.blockId))try{var a;(null===(a=i.args)||void 0===a?void 0:a.keys).some((t=>W(i.methodName,t,e)))&&n.push([o,"final"===i.blockId])}catch{}if(i.action===Yt&&i.url===r)try{var s;const{action:t,key:r}=JSON.parse(null===(s=i.options)||void 0===s?void 0:s.body);t&&r&&V(t,r,e)&&n.push([o,!0])}catch{}})),console.log("Cache invalidation",n),n.forEach((t=>{let[e,n]=t;const r=this.cache[e];r.status=ee,this.invalidateCallbacks(r,n)}))}cachedBlock(t,e,n,r){return this.cachedPromise({action:"Block",blockId:e},(()=>t.block(e)),n,r)}cachedViewCall(t,e,n,r,o,i,a){return this.cachedPromise({action:Vt,contractId:e,methodName:n,args:r,blockId:o},(()=>t.viewCall(e,n,r,o)),i,a)}async asyncFetch(t,e){var n,r,o,i;const a=null===(n=e)||void 0===n||null===(n=n.responseType)||void 0===n?void 0:n.toLowerCase();e={method:null===(r=e)||void 0===r?void 0:r.method,headers:null===(o=e)||void 0===o?void 0:o.headers,body:null===(i=e)||void 0===i?void 0:i.body};try{const n=await fetch(t,e),r=n.status,o=n.ok,i=n.headers.get("content-type"),s=o?await("arraybuffer"===a?n.arrayBuffer():"blob"===a?n.blob():"formdata"===a?n.formData():"json"===a?n.json():"text"===a?n.text():i&&-1!==i.indexOf("application/json")?n.json():n.text()):void 0;return{ok:o,status:r,contentType:i,body:s}}catch(t){return{ok:!1,error:t.message}}}cachedFetch(t,e,n,r){return this.cachedPromise({action:Yt,url:t,options:e},(()=>this.asyncFetch(t,e)),n,r)}cachedCustomPromise(t,e,n,r){return this.cachedPromise({action:"CustomPromise",key:t},(()=>e()),n,r)}socialGet(t,e,n,r,o,i,a){if(!t)return null;const s={keys:e=(e=Array.isArray(e)?e:[e]).map((t=>n?"".concat(t,"/**"):"".concat(t))),options:o};let c=this.cachedViewCall(t,t.config.contractName,"get",s,r,i,a);if(null===c)return null;if(1===e.length){const t=e[0].split("/");for(let e=0;e<t.length;e++){var l;const n=t[e];if("*"===n||"**"===n)break;c=null===(l=c)||void 0===l?void 0:l[n]}}return c}socialIndex(t,e,n,r,o,i){const a=this.cachedFetch("".concat(t.config.apiUrl,"/index"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e,key:n,options:r})},o,i);return null!=a&&a.ok?a.body:null}localStorageGet(t,e,n){return this.cachedPromise({action:Xt,domain:t,key:e},void 0,n,{forceCachedValue:!0})}asyncLocalStorageGet(t,e){return e=JSON.stringify({action:Xt,domain:t,key:e}),this.innerGet(e)}localStorageSet(t,e,n){e=JSON.stringify({action:Xt,domain:t,key:e});const r=this.cache[e]||{status:Zt,invalidationCallbacks:[],result:null,time:(new Date).getTime()};this.cache[e]=r,r.status=te,JSON.stringify(n)!==JSON.stringify(r.result)&&(r.result=n,this.innerSet(e,n),this.invalidateCallbacks(r,!1))}cachedEthersCall(t,e,n,r,o){return t?this.cachedPromise({action:"EthersCall",callee:e,args:n},(()=>t[e](...n)),r,o):null}}const oe=new re,ie=new re("secondaryCacheDb"),ae=(0,a.singletonHook)(oe,(()=>oe)),se=(0,a.singletonHook)(ie,(()=>ie)),ce=t=>{const e=pt(),n=ae(),r=se();return t&&t!==e.config.networkId?r:n},le=y.mul(2e3),ue=y.mul(500),fe=y.mul(500),de=y.mul(500),he=require("react-bootstrap");function pe(){return pe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pe.apply(this,arguments)}const ge=t=>{const e=JSON.stringify(t,null,2);return"```json\n".concat(e,"\n```")},ye={page:"commit"},me="write_permission",we=t=>{var e;const n=pt(t.networkId),r=Ct(t.networkId),a=ce(),[s,c]=(0,o.useState)(!1),[u,f]=(0,o.useState)(0),[d,h]=(0,o.useState)(!1),[g,m]=(0,o.useState)(null),[w,b]=(0,o.useState)(null),[v,E]=(0,o.useState)(null),[S,k]=(0,o.useState)(!0),B=t.show,O=t.onHide,C=()=>{if(t.onCancel)try{t.onCancel()}catch(t){console.error(t)}O()},N=t.data,A=t.force,x=t.widgetSrc;(0,o.useEffect)((()=>{x?(E(null),a.asyncLocalStorageGet(ye,{widgetSrc:x,accountId:r,type:me}).then((t=>E(t)))):E(!1)}),[x,r,a,B]),(0,o.useEffect)((()=>{k(!1!==v)}),[v]),(0,o.useEffect)((()=>{if(d||!B||!r||!n)return;const t=JSON.stringify(null!=N?N:null);(A||t!==g)&&(m(t),b(null),(async(t,e,n,r)=>{await t.selector;const o=t.accountId;if(!o)return void alert("You're not logged in. Sign in to commit data.");const[i,a]=await Promise.all([t.viewCall(t.config.contractName,"get_account_storage",{account_id:o}),o!==e?t.viewCall(t.config.contractName,"is_write_permission_granted",{predecessor_id:o,key:e}):Promise.resolve(!0)]),s=l()((null==i?void 0:i.available_bytes)||"0");let c={[e]:G(n)},u={};r||(u=await(async(t,e)=>{const n=q(e);return await t.contract.get({keys:n})})(t,c),c=J(c,u));const f=y.mul($(c,u)).add(i?l()(0):ue).add(a?l()(0):de).add(fe),d=U(f.sub(s.mul(y)),i?a?l()(0):l()(1):le);return{originalData:n,accountId:e,accountStorage:i,availableBytes:s,currentData:u,data:c,expectedDataBalance:f,deposit:d,permissionGranted:a}})(n,r,N,A).then(b))}),[d,N,g,A,n,r,B]);const T=async()=>{h(!0);const e=S&&X(v,w.data[r]);a.localStorageSet(ye,{widgetSrc:x,accountId:r,type:me},e),E(e);const o=w.deposit.add(y.mul(u));if(w.permissionGranted?await(async(t,e,n)=>(console.log("Committing data",e),await t.contract.set({data:e},p.mul(100).toFixed(0),n.toFixed(0))))(n,w.data,o):r===n.accountId?await(async(t,e,n)=>{const r=await(await t.selector).wallet(),o=[];return t.publicKey&&(o.push(at("grant_write_permission",{public_key:t.publicKey.toString(),keys:[t.accountId]},p.mul(100).toFixed(0),n.gt(0)?n.toFixed(0):"1")),n=l()(0)),o.push(at("set",{data:e},p.mul(100).toFixed(0),n.gt(0)?n.toFixed(0):"1")),await r.signAndSendTransaction({receiverId:t.config.contractName,actions:o})})(n,w.data,o):alert("No permission to commit under given account"),b(null),m(null),t.onCommit)try{t.onCommit(w.data)}catch(t){console.error(t)}a.invalidateCache(n,w.data),O(),h(!1)},R=w&&!w.permissionGranted&&r!==n.accountId;!d&&!R&&!s&&w&&B&&v&&w.data&&w.deposit.add(y.mul(u)).eq(0)&&w.permissionGranted&&JSON.stringify(X(v,w.data[r]))===JSON.stringify(v)&&(c(!0),T().then((()=>c(!1))));const P=!!w&&B&&!s&&null!==v;return i().createElement(At(),{size:"xl",centered:!0,scrollable:!0,show:P,onHide:C},i().createElement(At().Header,{closeButton:!0},i().createElement(At().Title,null,"Saving data")),i().createElement(At().Body,null,R?i().createElement("div",null,i().createElement("h5",null,"Can't commit, because the account ",n.accountId," doesn't have permission to write under pretended account ",r)):w?i().createElement("div",null,i().createElement("div",null,w.data?i().createElement(qt,{text:ge(w.data)}):i().createElement("h5",null,"No new data to save")),w.data&&(null==w||null===(e=w.deposit)||void 0===e?void 0:e.gt(0))&&i().createElement("div",null,i().createElement("h6",null,"Required storage deposit"," ",i().createElement("small",{className:"text-secondary"},"(can be recovered later)")),i().createElement("div",{className:"mb-2"},w.deposit.div(y).toFixed(0)," bytes ="," ",_(w.deposit)),i().createElement("h6",null,"Optional storage deposit"," ",i().createElement("small",{className:"text-secondary"},"(can be used to avoid future wallet TX confirmation)")),i().createElement("div",null,i().createElement(he.ToggleButtonGroup,{type:"radio",name:"storageDeposit",value:u,onChange:f,disabled:d},i().createElement(he.ToggleButton,{id:"esd-0",variant:"outline-success",value:0},"No Deposit"),i().createElement(he.ToggleButton,{id:"esd-5000",variant:"outline-success",value:5e3},"0.05 NEAR (5Kb)"),i().createElement(he.ToggleButton,{id:"esd-20000",variant:"outline-success",value:2e4},"0.2 NEAR (20Kb)"),i().createElement(he.ToggleButton,{id:"esd-100000",variant:"outline-success",value:1e5},"1 NEAR (100Kb)")))),!R&&x&&w.data&&i().createElement("div",{className:"form-check form-switch"},i().createElement("input",{className:"form-check-input",type:"checkbox",role:"switch",id:"dont-ask-for-widget",checked:S,onChange:t=>{k(t.target.checked)}}),i().createElement("label",{className:"form-check-label",htmlFor:"dont-ask-for-widget"},"Don't ask again for saving similar data by"," ",i().createElement("span",{className:"font-monospace"},x)))):I),i().createElement(At().Footer,null,i().createElement("button",{className:"btn btn-success",disabled:!(null!=w&&w.data)||d||R,onClick:t=>{t.preventDefault(),T()}},d&&I," Save Data"),i().createElement("button",{className:"btn btn-secondary",onClick:C,disabled:d},"Close")))},be=t=>{const e=Ct(t.networkId),{data:n,children:r,onClick:a,onCommit:s,onCancel:c,disabled:l,widgetSrc:u,force:f,...d}=t,[h,p]=(0,o.useState)(null);return i().createElement(i().Fragment,null,i().createElement("button",pe({},d,{disabled:l||!n||!!h||!e,onClick:t=>{t.preventDefault(),p("function"==typeof n?n():n),a&&a()}}),!!h&&I,r),i().createElement(we,{show:!!h,widgetSrc:u,data:h,force:f,onHide:()=>p(null),onCancel:c,onCommit:s}))},ve=i().createContext(null),Ee=i().forwardRef(((t,n)=>{var r;const{loading:a,src:s,code:c,depth:u,config:f,props:d,...h}=t,[g,y]=(0,o.useState)(0),[m,w]=(0,o.useState)(null),[b,v]=(0,o.useState)(null),[E,k]=(0,o.useState)({hooks:[],state:void 0}),[B,O]=(0,o.useState)(0),[C,N]=(0,o.useState)({}),[A,x]=(0,o.useState)(null),[U,T]=(0,o.useState)(null),[_,R]=(0,o.useState)(null),[P,j]=(0,o.useState)(null),[L,F]=(0,o.useState)(null),[D,M]=(0,o.useState)(null),$=(0,o.useContext)(ve),q=L&&(null===(r=L.findLast((t=>t&&t.networkId)))||void 0===r?void 0:r.networkId),J=ce(q),z=pt(q),G=Ct(q),[K,H]=(0,o.useState)(null);(0,o.useEffect)((()=>{const t=f?Array.isArray(f)?f:[f]:[];rt(t,L)||F(t)}),[f,L]),(0,o.useEffect)((()=>{const t=ot(s,c,L);rt(t,D)||M(t)}),[s,c,L,D]),(0,o.useEffect)((()=>{if(z)if(null!=D&&D.src){const t=D.src,[e,n]=t.split("@"),r=J.socialGet(z,e.toString(),!1,n,void 0,(()=>{y(g+1)}));w(r),v(t)}else null!=D&&D.code&&(w(D.code),v(null))}),[z,D,g]),(0,o.useEffect)((()=>{x(null),H(null),m||void 0===m&&H(i().createElement("div",{className:"alert alert-danger"},'Source code for "',b,'" is not found'))}),[m,b]);const W=(0,o.useCallback)((t=>{if(!z||!t||0===t.length)return null;t=t.map((t=>({contractName:t.contractName,methodName:t.methodName,args:t.args||{},deposit:t.deposit?l()(t.deposit):l()(0),gas:t.gas?l()(t.gas):p.mul(30)}))),console.log("confirm txs",t),T(t)}),[z]),V=(0,o.useCallback)((t=>{if(!z)return null;console.log("commit requested",t),R(t)}),[z]);return(0,o.useEffect)((()=>{if(!z||!m)return;k({hooks:[],state:void 0});const t=new e.default({near:z,rawCode:m,setReactState:k,cache:J,refreshCache:()=>{O((t=>t+1))},confirmTransactions:W,depth:u,widgetSrc:b,requestCommit:V,version:zt()(),widgetConfigs:L,ethersProviderContext:$});return x(t),()=>{t.stop()}}),[b,z,m,u,V,W,L,$]),(0,o.useEffect)((()=>{z&&N({loading:!1,accountId:null!=G?G:null,widgetSrc:b,networkId:z.config.networkId})}),[z,G,b]),(0,o.useLayoutEffect)((()=>{if(!A)return;const t={props:d||{},context:C,reactState:E,cacheNonce:B,version:A.version,forwardedProps:{...h,ref:n}};if(!rt(t,P)){j(et(t));try{var e;H(null!==(e=A.renderCode(t))&&void 0!==e?e:"Execution failed")}catch(t){H(i().createElement("div",{className:"alert alert-danger"},"Execution error:",i().createElement("pre",null,t.message),i().createElement("pre",null,t.stack))),console.error(t)}}}),[A,d,C,E,B,P,n,h]),null!=K?i().createElement(Ht.ErrorBoundary,{FallbackComponent:S,onReset:()=>{H(null)},resetKeys:[K]},i().createElement(i().Fragment,null,K,U&&i().createElement(Kt,{transactions:U,onHide:()=>T(null),networkId:q}),_&&i().createElement(we,{show:!0,widgetSrc:b,data:_.data,force:_.force,onHide:()=>R(null),onCommit:_.onCommit,onCancel:_.onCancel,networkId:q}))):null!=a?a:I}))})(),r})()));